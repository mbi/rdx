import{timeago}from"./utils.min.js";import{replaceRedditLinks,htmlDecode}from"./html.min.js";import{getget}from"./functions.min.js?v=CACHEBUSTER";export function cbuilder(e){let t=timeago(1e3*e.created_utc),a=1==e.is_submitter?"isop":"",r=" moderator"==e.distinguished?"ismod":"",i='<div class="comment ccp'+e.depth+("AutoModerator"===e.author?" collapsed":"")+'" id="'+e.id+'"><div class="comment_author"><span class="authorttext '+a+r+'"><a class="authorlink" href="user.html?u='+e.author+'">'+e.author+'</a></span>  <span class="comment_meta upvotes-icon icon">'+e.score+" &bull; "+t+' </span></div><div class="comment_text">'+replaceRedditLinks(htmlDecode(e.body_html))+"</div>";return i+="</div>",i}export function loadcomments(e){var t='<div class="comments-block">';const a=document.getElementById("paginate");a.childNodes.forEach((e=>e.remove())),a.dataset.cids="";for(let r in e)if("more"==e[r].kind&&e[r].data.children.length){let t=e[r].data.children;a.innerHTML='<button class="load-more-comments">Load More</button>',a.dataset.cids=t}else{t+=cbuilder(e[r].data);let a=e[r].data.replies;"object"==typeof a&&null!==a&&(t+=handlereplies(a))}return t+="</div>"}function handlerepliesmn(e){var t="";let a=e.data.children;for(let e in a)if("more"==a[e].kind)t+='<div class="comment ccp'+a[e].data.depth+'"><div class="comment_author"><a href="?url=https://www.reddit.com'+a[e].data.permalink+' " >View other replies</a></div></div>';else{t+=cbuilder(a[e].data);var r=a[e].data.replies;"object"==typeof r&&null!==r&&(t+='<a class="viewmore" href="?url=https://www.reddit.com'+a[e].data.permalink+'" >view more replies</a>')}return t}function handlerepliesm(e){let t=e.data.children;var a="";for(let e in t)if("more"==t[e].kind)a+='<div class="comment ccp'+t[e].data.depth+'"><div class="comment_author"><a href="?url=https://www.reddit.com'+t[e].data.permalink+' " >View other replies</a></div></div>';else{a+=cbuilder(t[e].data);var r=t[e].data.replies;"object"==typeof r&&null!==r&&(a+=handlerepliesmn(r))}return a}function handlereplies(e){let t=e.data.children;var a="";for(let e in t)if("more"==t[e].kind){a+='<a class="viewmore" href="?url='+getget("url")+t[e].data.id+'/">View more replies</a>'}else{a+=cbuilder(t[e].data);var r=t[e].data.replies;"object"==typeof r&&null!==r&&(a+=handlerepliesm(r))}return a}